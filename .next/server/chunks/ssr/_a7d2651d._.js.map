{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/Web%20development/projects/doctors-appointment-platform/actions/onboarding.js"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/lib/prisma\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\n/**\r\n * Sets the user's role and related information\r\n */\r\nexport async function setUserRole(formData) {\r\n  const { userId } = await auth();\r\n\r\n  if (!userId) {\r\n    throw new Error(\"Unauthorized\");\r\n  }\r\n\r\n  // Find user in our database\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found in database\");\r\n\r\n  const role = formData.get(\"role\");\r\n\r\n  if (!role || ![\"PATIENT\", \"DOCTOR\"].includes(role)) {\r\n    throw new Error(\"Invalid role selection\");\r\n  }\r\n\r\n  try {\r\n    // For patient role - simple update\r\n    if (role === \"PATIENT\") {\r\n      await db.user.update({\r\n        where: {\r\n          clerkUserId: userId,\r\n        },\r\n        data: {\r\n          role: \"PATIENT\",\r\n        },\r\n      });\r\n\r\n      revalidatePath(\"/\");\r\n      return { success: true, redirect: \"/doctors\" };\r\n    }\r\n\r\n    // For doctor role - need additional information\r\n    if (role === \"DOCTOR\") {\r\n      const specialty = formData.get(\"specialty\");\r\n      const experience = parseInt(formData.get(\"experience\"), 10);\r\n      const credentialUrl = formData.get(\"credentialUrl\");\r\n      const description = formData.get(\"description\");\r\n\r\n      // Validate inputs\r\n      if (!specialty || !experience || !credentialUrl || !description) {\r\n        throw new Error(\"All fields are required\");\r\n      }\r\n\r\n      await db.user.update({\r\n        where: {\r\n          clerkUserId: userId,\r\n        },\r\n        data: {\r\n          role: \"DOCTOR\",\r\n          specialty,\r\n          experience,\r\n          credentialUrl,\r\n          description,\r\n          verificationStatus: \"PENDING\",\r\n        },\r\n      });\r\n\r\n      revalidatePath(\"/\");\r\n      return { success: true, redirect: \"/doctor/verification\" };\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Failed to set user role:\", error);\r\n    throw new Error(`Failed to update user profile: ${error.message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Gets the current user's complete profile information\r\n */\r\nexport async function getCurrentUser() {\r\n  const { userId } = await auth();\r\n\r\n  if (!userId) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const user = await db.user.findUnique({\r\n      where: {\r\n        clerkUserId: userId,\r\n      },\r\n    });\r\n\r\n    return user;\r\n  } catch (error) {\r\n    console.error(\"Failed to get user information:\", error);\r\n    return null;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;;;;;;;AAKO,eAAe,YAAY,QAAQ;IACxC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE5B,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,4BAA4B;IAC5B,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,QAAQ,CAAC;QAAC;QAAW;KAAS,CAAC,QAAQ,CAAC,OAAO;QAClD,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,mCAAmC;QACnC,IAAI,SAAS,WAAW;YACtB,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,MAAM,CAAC;gBACnB,OAAO;oBACL,aAAa;gBACf;gBACA,MAAM;oBACJ,MAAM;gBACR;YACF;YAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;YACf,OAAO;gBAAE,SAAS;gBAAM,UAAU;YAAW;QAC/C;QAEA,gDAAgD;QAChD,IAAI,SAAS,UAAU;YACrB,MAAM,YAAY,SAAS,GAAG,CAAC;YAC/B,MAAM,aAAa,SAAS,SAAS,GAAG,CAAC,eAAe;YACxD,MAAM,gBAAgB,SAAS,GAAG,CAAC;YACnC,MAAM,cAAc,SAAS,GAAG,CAAC;YAEjC,kBAAkB;YAClB,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,aAAa;gBAC/D,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,MAAM,CAAC;gBACnB,OAAO;oBACL,aAAa;gBACf;gBACA,MAAM;oBACJ,MAAM;oBACN;oBACA;oBACA;oBACA;oBACA,oBAAoB;gBACtB;YACF;YAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;YACf,OAAO;gBAAE,SAAS;gBAAM,UAAU;YAAuB;QAC3D;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,MAAM,OAAO,EAAE;IACnE;AACF;AAKO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE5B,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;YACpC,OAAO;gBACL,aAAa;YACf;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACT;AACF;;;IA7FsB;IA0EA;;AA1EA,+OAAA;AA0EA,+OAAA","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///D:/Web%20development/projects/doctors-appointment-platform/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Card({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardHeader({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardTitle({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none font-semibold\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardDescription({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardAction({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n        className\r\n      )}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nfunction CardContent({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (<div data-slot=\"card-content\" className={cn(\"px-6\", className)} {...props} />);\r\n}\r\n\r\nfunction CardFooter({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    (<div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAEA;;;;AAEA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBAAQ,8OAAC;QAAI,aAAU;QAAe,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QAAa,GAAG,KAAK;;;;;;AACnF;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACG,8OAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///D:/Web%20development/projects/doctors-appointment-platform/app/%28main%29/doctor/verification/page.jsx"],"sourcesContent":["import { ClipboardCheck, AlertCircle, XCircle } from \"lucide-react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport Link from \"next/link\";\r\nimport { getCurrentUser } from \"@/actions/onboarding\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nexport default async function VerificationPage() {\r\n  // Get complete user profile\r\n  const user = await getCurrentUser();\r\n\r\n  // If already verified, redirect to dashboard\r\n  if (user?.verificationStatus === \"VERIFIED\") {\r\n    redirect(\"/doctor\");\r\n  }\r\n\r\n  const isRejected = user?.verificationStatus === \"REJECTED\";\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-12\">\r\n      <div className=\"max-w-2xl mx-auto\">\r\n        <Card className=\"border-emerald-900/20\">\r\n          <CardHeader className=\"text-center\">\r\n            <div\r\n              className={`mx-auto p-4 ${\r\n                isRejected ? \"bg-red-900/20\" : \"bg-amber-900/20\"\r\n              } rounded-full mb-4 w-fit`}\r\n            >\r\n              {isRejected ? (\r\n                <XCircle className=\"h-8 w-8 text-red-400\" />\r\n              ) : (\r\n                <ClipboardCheck className=\"h-8 w-8 text-amber-400\" />\r\n              )}\r\n            </div>\r\n            <CardTitle className=\"text-2xl font-bold text-white\">\r\n              {isRejected\r\n                ? \"Verification Declined\"\r\n                : \"Verification in Progress\"}\r\n            </CardTitle>\r\n            <CardDescription className=\"text-lg\">\r\n              {isRejected\r\n                ? \"Unfortunately, your application needs revision\"\r\n                : \"Thank you for submitting your information\"}\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"text-center\">\r\n            {isRejected ? (\r\n              <div className=\"bg-red-900/10 border border-red-900/20 rounded-lg p-4 mb-6 flex items-start\">\r\n                <AlertCircle className=\"h-5 w-5 text-red-400 mr-3 mt-0.5 flex-shrink-0\" />\r\n                <div className=\"text-muted-foreground text-left\">\r\n                  <p className=\"mb-2\">\r\n                    Our administrative team has reviewed your application and\r\n                    found that it doesn&apos;t meet our current requirements.\r\n                    Common reasons for rejection include:\r\n                  </p>\r\n                  <ul className=\"list-disc pl-5 space-y-1 mb-3\">\r\n                    <li>Insufficient or unclear credential documentation</li>\r\n                    <li>Professional experience requirements not met</li>\r\n                    <li>Incomplete or vague service description</li>\r\n                  </ul>\r\n                  <p>\r\n                    You can update your application with more information and\r\n                    resubmit for review.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"bg-amber-900/10 border border-amber-900/20 rounded-lg p-4 mb-6 flex items-start\">\r\n                <AlertCircle className=\"h-5 w-5 text-amber-400 mr-3 mt-0.5 flex-shrink-0\" />\r\n                <p className=\"text-muted-foreground text-left\">\r\n                  Your profile is currently under review by our administrative\r\n                  team. This process typically takes 1-2 business days.\r\n                  You&apos;ll receive an email notification once your account is\r\n                  verified.\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            <p className=\"text-muted-foreground mb-6\">\r\n              {isRejected\r\n                ? \"You can update your doctor profile and resubmit for verification.\"\r\n                : \"While you wait, you can familiarize yourself with our platform or reach out to our support team if you have any questions.\"}\r\n            </p>\r\n\r\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n              {isRejected ? (\r\n                <>\r\n                  <Button\r\n                    asChild\r\n                    variant=\"outline\"\r\n                    className=\"border-emerald-900/30\"\r\n                  >\r\n                    <Link href=\"/\">Return to Home</Link>\r\n                  </Button>\r\n                  <Button\r\n                    asChild\r\n                    className=\"bg-emerald-600 hover:bg-emerald-700\"\r\n                  >\r\n                    <Link href=\"/doctor/update-profile\">Update Profile</Link>\r\n                  </Button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Button\r\n                    asChild\r\n                    variant=\"outline\"\r\n                    className=\"border-emerald-900/30\"\r\n                  >\r\n                    <Link href=\"/\">Return to Home</Link>\r\n                  </Button>\r\n                  <Button\r\n                    asChild\r\n                    className=\"bg-emerald-600 hover:bg-emerald-700\"\r\n                  >\r\n                    <Link href=\"/contact-support\">Contact Support</Link>\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AAAA;;;;;;;;AAEe,eAAe;IAC5B,4BAA4B;IAC5B,MAAM,OAAO,MAAM,CAAA,GAAA,qHAAA,CAAA,iBAAc,AAAD;IAEhC,6CAA6C;IAC7C,IAAI,MAAM,uBAAuB,YAAY;QAC3C,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACX;IAEA,MAAM,aAAa,MAAM,uBAAuB;IAEhD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,yHAAA,CAAA,OAAI;gBAAC,WAAU;;kCACd,8OAAC,yHAAA,CAAA,aAAU;wBAAC,WAAU;;0CACpB,8OAAC;gCACC,WAAW,CAAC,YAAY,EACtB,aAAa,kBAAkB,kBAChC,wBAAwB,CAAC;0CAEzB,2BACC,8OAAC,4MAAA,CAAA,UAAO;oCAAC,WAAU;;;;;yDAEnB,8OAAC,0NAAA,CAAA,iBAAc;oCAAC,WAAU;;;;;;;;;;;0CAG9B,8OAAC,yHAAA,CAAA,YAAS;gCAAC,WAAU;0CAClB,aACG,0BACA;;;;;;0CAEN,8OAAC,yHAAA,CAAA,kBAAe;gCAAC,WAAU;0CACxB,aACG,mDACA;;;;;;;;;;;;kCAGR,8OAAC,yHAAA,CAAA,cAAW;wBAAC,WAAU;;4BACpB,2BACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,oNAAA,CAAA,cAAW;wCAAC,WAAU;;;;;;kDACvB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAO;;;;;;0DAKpB,8OAAC;gDAAG,WAAU;;kEACZ,8OAAC;kEAAG;;;;;;kEACJ,8OAAC;kEAAG;;;;;;kEACJ,8OAAC;kEAAG;;;;;;;;;;;;0DAEN,8OAAC;0DAAE;;;;;;;;;;;;;;;;;qDAOP,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,oNAAA,CAAA,cAAW;wCAAC,WAAU;;;;;;kDACvB,8OAAC;wCAAE,WAAU;kDAAkC;;;;;;;;;;;;0CASnD,8OAAC;gCAAE,WAAU;0CACV,aACG,sEACA;;;;;;0CAGN,8OAAC;gCAAI,WAAU;0CACZ,2BACC;;sDACE,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,SAAQ;4CACR,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAI;;;;;;;;;;;sDAEjB,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAyB;;;;;;;;;;;;iEAIxC;;sDACE,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,SAAQ;4CACR,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAI;;;;;;;;;;;sDAEjB,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUlD","debugId":null}}]
}